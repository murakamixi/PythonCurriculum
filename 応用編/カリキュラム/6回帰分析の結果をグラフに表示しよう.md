## 概要

単回帰分析はできたと思いますが、それをグラフに示したほうがわかりやすいでしょう。そんなグラフや図を書く時に便利なmatplotlibを用いる方法を学習しましょう。

# この章の目標

**推定完了時間: １時間**

　単回帰分析はできたでしょうか？
　単回帰分析はできてもそれはどのようなものか見てみたくなりませんか？
　見てくなったらそんな時に書くのは、グラフではありませんか？グラフを書く方法をここでは学びましょう。

**1. matplotlibモジュールを用いてグラフを書く方法を学習する**

# matplotlibとは
　Matplotlib はPythonのグラフ描画のためのモジュールです。Matplotlibを使うことで、グラフの描画やデータの可視化が簡単に行えます。また、扱えるグラフの種類については公式ギャラリーにて実際の例を見ることができます。
[公式ギャラリー](https://matplotlib.org/gallery.html)

## グラフを書いてみよう
　グラフを実際に書いてみましょう。ここでは、線グラフ・分散図の書き方と2つのグラフを１つにする方法を学びましょう。グラフを書くことで分析結果を説明した際にみんな納得するような説明書類が作れるようになるでしょう。
　以下では、**pyplot**モジュールをimportしている前提で進めますので先にimport文を書きましょう。

###### <font color='red'>pyplotモジュールをインポートしよう</font>


```python
import matplotlib.pyplot as plt
```

### 線グラフの書き方
　線グラフの書き方は、数量の大きさを表す位置を線で結んだグラフです。時間とともに変化する数量を示すときに利用します。pyplotモジュールの<font color='red'>**plot()**</font>で描画することが出来ます。先ほどの切片と傾きを使ってグラフを書いてみましょう。また、グラフをプロットするために、**predict**という作成した回帰モデルに説明変数の値を与えた時の目的変数（予測）値を得るpredictメソッドを用いています。

　plotの構文は以下の通りです。

```python
plt.plot(プロット範囲, プロットする関数, オプション引数)
```

```python
# 0から40の範囲を0.1のステップでプロットするためにNumpy配列を作成
plt.plot(xdata, model.predict(xdata), color="red")
# グラフを表示するメソッド
plt.show()
```

　ここで、plt.plotにオプションとなる引数がついていますね！
　代表的な引数をみていきましょう。
　またこれでは、なんのグラフかもわからないですし、横軸も縦軸もなんの意味なのかわかりません。ですので、横軸と縦軸やグラフにタイトルなどのつけ方を学びましょう。

### グラフの見た目を変えよう
　ここでは代表的なオプションの引数についてみていきます。これらのオプションを指定しなくても構いませんが指定した方がいい場合もありますし、したくなったときのためにこんなのがあるのかということを知っておきましょう。

|オプション名|項目|表示例|
|:--:|:--:|:--:|
|marker|印|“o”, “v”, “^”, “d”|
|color|線の色|“red”, “blue”, green”|
|linestyle|線の形|“-“, “–“, “-.”, “:”|
|linewidth|線の太さ|1,2,3,4,5|

　また、ラベルとタイトルをつけてみましょう。ラベルとタイトルは以下の表の通りです。参考に先ほどのグラフにラベルをつけてみましょう。

|メソッド名|項目|
|:--:|:--:|
|title|タイトル|
|xlabel|横軸のラベル|
|ylabel|縦軸のラベル|
|legend|凡例を表示|

　以下の例を参考にグラフにラベルをつけてみよう。

```python
plt.title("boston_housing")
plt.xlabel("LSTAT")
plt.ylabel("TARGET")
```

以下のグラフのようになりましたか？

![](/media/editor/D-5直線の線グラフのみ_20201130142926332461.png)

以上で、回帰分析した結果の直線を見ることができましたが、これでは本当の住宅価格のデータと一致しているかわかりません。ですので、個々の住宅価格のデータのグラフも作成して見比べてみることにしましょう。バラバラのデータを見るときに便利な分散図を使ってみることにしましょう。

### 分散図の書き方
　ここでは分散図の書き方を学習しましょう。分散図は2つの量にどのような関係があるのかを見るときに使うグラフです。分散図は、pyplotモジュールの<font color='red'>**scatter()**</font>で描画することが出来ます。

　scatterの構文は以下の通りです。

```python
scatter(x軸データ,y軸データ,)
```

#### <font color='blue'>分散図をx軸に説明変数とy軸に目的変数をとって分散図を表示してみましょう</font>

##### [演習解答](/answer/21)

　これにも線グラフと同様に様々なオプション引数が使えます。線グラフの先ほど紹介したオプションも使えますが、分散図特有のオプション引数が1つあるので紹介します。

|メソッド名|項目|
|:--:|:--:|
|s|プロットのサイズ変更|

![](/media/editor/D-5直線グラフと分散図_20201130143109552564.png)

　これで1つのグラフに2つのデータを表示することができましたね。
　ところで、そもそも、**「このモデルは本当に正しいのか？」**と疑問に思いませんか？何を持って、このモデル（結果）は正しいと言えるのでしょうか？
　何が正しいのかということを次回学習していきましょう。
 
# まとめ

　ここでは、matplotlibの使い方を学習しました。matplotlibは機械学習の結果を表示する際に頻繁に使いますので、使い方に慣れておきましょう。
　今回紹介した以外に幅広い使い方をできますので興味のある方は調べてみてください。