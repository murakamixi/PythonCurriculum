## 概要
今回は、条件分岐を行うif文を用いて、表示したいメニューで入力された値によって処理を分けるところまで行います。

# この章の目標
**推定完了時間:　１時間30分**

**1. 条件分岐によって処理を変える方法を学ぶ**

　ユーザーが使いたい機能（レビューの書き込み、閲覧）を選べるようにしましょう。その際に用いられる条件分岐について学びましょう。


# ④メニュー画面の実装
　まず、プログラムを実行してから、最初に実行されるメニュー画面を作りましょう。

**メニュー画面**

```python
レビュー数：0
[0]レビューを書く
[1]レビューを読む
[2]アプリを終了する
```

　このアプリははじめに確認したように、メニュー画面の横で番号を選択して、番号を入力して機能を選択します。

### このステップでできること

- 条件分岐ができるようになる

## メニューを表示しよう

　まずは、メニューを表示させてみましょう。メニューは以下の項目を表示した後、**ユーザーの入力を待ちます**。
**[0]レビューを書く**
**[1]レビューを読む**
**[2]アプリを終了する**
 入力後は、今まで通り、レビューを書く画面を表示させたままで構いません。また、上のレビュー数も0で構いません。

#### <font color='blue'> プログラムを実行したらまず最初にメニュー画面を表示し、ユーザーの入力後にレビューを書く画面を表示するようにしよう</font>

##### [演習解答](/answer/9)


## 条件分岐を学ぼう

　このままでは、メニュー画面で何を選択してもレビューの表示画面になってしまいます。
　次は、**ユーザーの入力に応じて処理を変える**ということをしないとメニュー画面から選択して機能を選ぶという機能を実現できません。
　ここで、ユーザーの入力の値(条件)に応じて処理を変えるという**条件分岐**です。ここでは、ユーザーから入力された値によって、以下のように分岐させます。

|入力される値|処理|
|:--:|:--:|
|0|レビューを書く|
|1|レビューを読む|
|2|プログラムを終了させる|
|それ以外|無効な値と表示させる|

### 条件分岐を追加する

　今回、条件分岐を行う際は、**if文**を利用します。

### if文

　条件分岐には。if文を用います。このif文は**条件式**の真偽によって実行する処理を分岐させることができます。
　基本的なif文の書き方は以下の通りです。

```python

if 条件A:
    条件AがTrueなら実行
elif 条件B:
    条件AがFalseかつ条件BがTrueなら実行
else:
    条件AもBもFalseなら実行

```

条件式とは、基本文法で出てきた(10<30)などのような返り値が真偽値（True、False）となる式のことです。
　条件式が**Trueの時に直下のコードブロックが実行されます**。
　また、条件分岐の最後にある**:**をよく忘れるので注意しましょう！

###### <font color='red'>コードブロックを追加して以下のソースコードを書き、実行しましょう</font>

```python

# ifの後に条件式を指定し、その条件が成り立つときに実行する処理を次の行に書きます。
score = 20
if score < 40: # 比較演算子 > を使っています。比較演算子はこの後に説明します。
    print("補習です")
else:
    print("合格です")

```

このプログラムで条件式は「score < 40」で、scoreは20なので条件式は真(true)となります。よって<font color='red'>**if~else間のコードブロック**</font>の処理が実行され、画面に"補習です"と表示されました。

### 条件式が偽の場合の処理は？

　条件式が偽(False)だった場合、条件分岐ではどのように処理が実行されるのでしょうか？
　再び先ほどのプログラムをみてみましょう。今度は、scoreが50で**条件式を偽(false)**にしてみてどこが実行されるか確かめてみます。

```python
# ifの後に条件式を指定し、その条件が成り立つときに実行する処理を次の行に書きます。
score = 50
if score < 40: # 比較演算子 > を使っています。比較演算子はこの後に説明します。
    print("補習です")
else:
    print("合格です")
```

　このプログラムの結果は、画面に"合格です"と表示されるはずです。よって条件式**条件式を偽(false)**の場合は<font color='red'>**else以降のコードブロック**</font>の処理が実行されるということがわかりました。

## 複雑な条件分岐を書いてみよう

　先ほどのプログラムに**不合格**を追加して、不合格、合格、補習を以下の表のように分けるようプログラムを変更しましょう。

|条件|表示|
|:--:|:--:|
|score < 20|"不合格です"|
|score < 40|"補習です"|
|それ以外|"合格です"|

　このように複数条件を書く場合は、if文の書き方で見た通り、**elif**を使います。

![](/media/editor/B-7条件分岐_20201129164609691029.png)

### int()関数

　int()関数は引数にとったオブジェクトを数値オブジェクトに変換してくれる関数です。以下の例を実行してみましょう。

```python
print(int("30"))
#出力は数値オブジェクトとして30
```

###### <font color='red'>先ほど書いたコードブロックを以下のように変更し、実行しましょう</font>

```python
# ifの後に条件式を指定し、その条件が成り立つときに実行する処理を次の行に書きます。
score = int(input())
if score < 20: # 比較演算子 > を使っています。比較演算子はこの後に説明します。
    print("不合格です")
elif score < 40 :
    print("補習です")
else:
    print("合格です")
```

　ここで復習ですが、input()関数の返り値はどんなオブジェクトでしたか？
　返り値は文字列オブジェクトでしたね。ですので今回はint()関数を用いて数値に変換して、比較できるようにしています。

## 条件分岐でメニュー画面の処理を分けよう

　ここまでで、条件分岐の仕組みはわかったと思います。
　それでは、早速メニュー画面の実装に戻りましょう。ここで、もう一度メニュー画面の条件分岐についてまとめましょう。

|入力される値|処理|
|:--:|:--:|
|0|レビューを書く|
|1|レビューを読む|
|2|プログラムを終了させる|
|それ以外|無効な値と表示させる|

- 「0:レビューを書く」は今まで書いていたレビューを書く処理を行えば良いです。
- 「1:レビューを読む」はまだ作っていないので何の処理もいりません。
- 「2:プログラムを終了する」も何の処理もいりません。。
- 「3:それ以外」は"入力された値は無効な値です"と表示させましょう。

#### <font color='blue'>メニュー画面でユーザーから入力された値によって処理を変えよう</font>

##### [演習解答](/answer/10)

## 処理を関数として分離しよう

　④で達成したかった機能は完成しました。しかし、プログラムの量が増えてきており、if文の中にも長い処理が書かれているため読みづらくなってしまっています。

今後elif間に処理を書くことも考えると、綺麗にして簡潔にしたいですね。そこで、複数の処理をそれぞれ1つの**関数**にまとめ、プログラムを綺麗にしましょう。

### 関数を定義する

　<font color='red'>**print(),str(),int()**</font>など、関数は今までもたくさん出てきました。このようなあらかじめpythonに組み込まれている**標準関数（組込関数）**以外にも、自分で関数を定義することもできます。この自分で定義する関数のことを<font color='red'>**自作関数**</font>と言います。
　自作関数を定義するには、以下のような構文を用います。

```python
def 関数名(仮引数):
 関数本文
```

　<font color='red'>**def**</font>の横の関数名は、変数名と同様のルールで命名することができます。関数は、**決まった処理のまとまり**のことを言います。プログラムの中で関数名を書くだけで、関数の関数本文の処理が実行されます。

```python
#関数の定義
def greeting():
  print('やまがたAI部')

#関数の実行
greeting()
```

　上記のプログラムで注意しなくてはならないのは、基本的にプログラムは上から下への読まれますが、**関数部分は関数が実行されるまで読み込まれない**ということです。ここでは2〜3行目の<font color='red'>**関数の定義は最初、無視されます**</font>。greetingが呼ばれることで<font color='red'>**初めて関数内のプログラムが実行されます**</font>。


![](/media/editor/B-7関数の呼び出し_20201129164653884063.png)


### <font color='blue'>コードブロックを追加し、以下のソースコードを実行しましょう</font>

```python
#関数の定義
def greeting():
  print('やまがたAI部')

#関数の実行
greeting()
```

## メソッドを使うメリット
　関数をなぜ使うのでしょうか？関数を使うメリットは大きく分けて２つあります。

**繰り返し行う処理を何度も実行しなくて済む**
例えば、「1から10までの数字を順番に出力する」という処理を同じプログラムの中で3回、実行したいとしましょう。関数を利用しないと、以下のように書くことになるでしょう。

```python
print(1)
print(2)
print(3)
print(4)
print(5)
print(6)
print(7)
print(8)
print(9)
print(10)

print(1)
print(2)
print(3)
print(4)
print(5)
print(6)
print(7)
print(8)
print(9)
print(10)

print(1)
print(2)
print(3)
print(4)
print(5)
print(6)
print(7)
print(8)
print(9)
print(10)
```

　しかし、関数を利用すれば以下のうようにまとめて書くことができます。

```python
def num_count():
  print(1)
  print(2)
  print(3)
  print(4)
  print(5)
  print(6)
  print(7)
  print(8)
  print(9)
  print(10)

num_count()
num_count()
num_count()
```

こちらの方が綺麗ですね。

**変更が生じた場合、修正する箇所が少なくて済む**
例えば、先ほどのプログラムを「5から10までの数字を順番に出力するプログラム」に変更する必要が生じた際、関数を利用していない場合では修正箇所が多くて大変です。

　この2点のメリットを意識しつつコードを読み書きできるようになりましょう。

##メニュー画面の処理をメソッドに変えよう
　メニュー画面の処理を関数に分けることで可読性をあげたいとおもます。
　処理を分割する関数名と処理は次のようなものです。

|関数名|処理|入力された値|
|:--:|:--:|:--:|
|post_review|レビューを書く|0|
|read_reviews|レビューを読む|1|
|exception|無効な値の入力を知らせる|それ以外|

　では、実際にレビューアプリの処理を関数に分けましょう。

### <font color='blue'>if文内の処理を上の表を参考に関数として分離しましょう</font>

　メソッドは呼び出されるよりも上で定義しないといけないので以下のようになります。

```python
　def post_review():
　　処理
 
 if input==1:
   post_review()
〜
```

##### [演習解答](/answer/11)

## STEP4完成コード

```python
print("レビュー数：0")
print("[0]レビューを書く")
print("[1]レビューを読む")
print("[2]アプリを終了する")

user_input = int(input())

def post_review():
  post = {}
  print("ジャンルを入力してください：")
  post['genre'] = input()
  print("タイトルを入力してください：")
  post['title'] = input()
  print("感想を入力してください：")
  post['review'] = input()
  line = "---------------------------"
  
  # レビューの描画
  print("ジャンル : {genre}\n{line}".format(genre=post['genre'], line=line))
  print("タイトル : {title}\n{line}".format(title=post['title'], line=line))
  print("感想 :\n{review}\n{line}".format(review=post['review'], line=line))

def read_reviews():
  print('レビューを読む')

def exception():
  print("入力された値は無効な値です")

if user_input == 0: # 「レビューを書く」
  post_review()
elif user_input == 1: # 「レビューを読む」
  read_reviews()
elif user_input == 2: # 「プログラムを終了する」
  print('プログラムを終了する')
else:
  exception()
```

### 処理の流れ

```python
def post_review():

def read_reviews():

def exception():
```

　では、「レビューの投稿」「レビューの閲覧」「エラー処理」の３つを関数として定義します。このとき呼び出す部分のコードよりも前に関数を定義する必要があります。そのため、メソッドはなるべくソースコードの最初に定義しましょう。

```python
print("レビュー数：0")
print("[0]レビューを書く")
print("[1]レビューを読む")
print("[2]アプリを終了する")
```

　関数を定義したので、ここからプログラムの処理が始まります。まずはメニューの表示を行います。

```python
input = int(input())
```

　メニューの表示後、メニューの中のどれを実行するか選択するためにターミナルからユーザに値を入力させます。

```python
if user_input == 0: # 「レビューを書く」
  post_review()
elif user_input == 1: # 「レビューを読む」
  read_reviews()
elif user_input == 2: # 「プログラムを終了する」
  print('プログラムを終了する')
else:
  exception()
```

ターミナルから入力した値を使って、どの処理を行うのか**条件分岐**する必要があります。値によって処理を変える<font color='red'>**条件分岐**</font>をプログラムで行うにはif文を使用します。

このようなソースコードが書けたら、次章の⑤へ進みましょう。


# まとめ

ここではメニューを選択できるようになりました。また、処理を複数回繰り返す時に便利な関数や、処理を綺麗に書く方法を学びました。
次からは他の機能を作り込んでいきましょう。