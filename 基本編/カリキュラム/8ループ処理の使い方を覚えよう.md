## 概要

今回は繰り返し処理を行うwhileを用いてメニューで選択されタ後にメニュー画面を再表示するという処理を加えたいと思います。

# この章の目標

**推定完了時間:１時間**

**1. 繰り返し処理の使いかたを学ぶ**

　メニューは今の所、一回きりしか表示されません。ですので、繰り返し同じ処理を実行して表示することができるように、繰り返し処理の方法を学びましょう。

# ⑤メニュー画面を複数回表示してみよう

　今の段階でアプリは、最初の１回しかメニューは表示されません。
　レビューを書いた後に、それを見るためには、レビュー画面へ戻る必要があります。そこで、⑤ではメニューで「アプリを終了する」を選択するまで、**プログラムが終了しないように**実装を変更したいと思います。

### このステップでできること

- ループ処理を行えるようになる

## 繰り返し処理を学ぼう

　メニューで「アプリを終了する」を選択するまで、プログラムを終了しないようにするには、以下のような処理の仕方になります。

![](/media/editor/B-8繰り返し処理のイメージ_20201129215706991795.png)

　プログラムを実行してから「プログラムを終了する」を選択されるまでプログラムを終わらせないようにするには、**ループ処理（繰り返し処理）**というものを使います。

### ループ処理（繰り返し処理）

　ループ処理とは、ある処理を繰り返し行うことを言います。条件を満たすまでは、ある処理を繰り返し続けます。
　pythonで繰り返し処理を行うためには、**while**、**for**があります。それぞれ、役割は違いますが、今回はwhileを用いていきます。

## while文

　while文は、繰り返し処理を行う文法の１つです。以下のような文法で繰り返し処理を実行します。

```python
while 条件式:
　処理
```

　while文はif文同様に、条件式で処理を変更します。
　条件式が真(True)のとき、処理を行います。

### whileで繰り返し処理を行う

　whileで繰り返し処理を行う具体的な例を作ってみましょう。1から10までを順に足し合わせてその都度表示するというプログラムを書いてみましょう。この、「1から10までを順に足し合わせてその都度表示する」というものを達成するために、**アルゴリズム**というものを組み立ててみましょう。

### アルゴリズム

　アルゴリズムは、ある目的を達成するために、行う処理の手順のことをさします。
　ここでは「1から10までを順に足し合わせてその都度表示する」が目的となり、どのようなプログラムを組むと目的を達成することができるのか？ということを考えることになります。
　以下は、今回のプログラムのアルゴリズム（処理手順）です。

1. 1から10まで１つづつ増えていく変数numを定義する
2. 足し合わせた値を表す変数sumを定義する
3. numが１０になるまで処理を繰り返すwhile文を書く
4. while文内に足し合わせる処理を繰り返す
5. while文の中に足し合わせた数字を表示させる処理を書く

![](/media/editor/B-8繰り返し処理の例の画像_20201129215735061532.png)

　では、上のアルゴリズムを実行してみましょう！

```python
sum = 0
num = 1

while num <= 10:
 sum += num
 num +=1
 print(sum)
```

num <= 10:という条件式で、「numが10以下のときは、処理を繰り返し行う」ということです。while内部で、<font color='red'>**+=**</font>というものが出てきましたが、これは**自己代入演算子と呼ばれるものです。**

### 自己代入演算子
自己代入演算子とは、自己代入、すなわち自分自身に代入するということを行う演算子のことです。自己代入演算子で<font color='red'>**+=**</font>で行った処理を通常通りに書くと以下のようになります。

```python
num = num + 1
```

この式を自己代入演算子<font color='red'>**+=**</font>で書き直すと、先ほどのようになります。
　自己代入演算子を使うことで記述が短くなり簡単に記述できます。これ以外にも多くの自己代入演算子が用意されています。是非調べてみましょう。

### 繰り返し処理を続けさせる

　プログラムを終了させずに、同じ処理をずっと繰り返し行う方法は、**while文の条件式をtrue**にしておくことです。これで、while文が繰り返すための条件が常に真となり、永遠にwhile内の処理が繰り返されるようになります。
　しかし、これでは**無限ループ**となり、このループから抜け出すことができません。これから抜け出すためには、breakを用います。
　では。breakをみていきましょう。

### break
　breakは、**ある条件の場合に処理を終了させる事ができます**。
　breakは、呼ばれた時点で終了し、それ以降のプログラムの処理を行いません。それでは実際に使い方をみていきましょう。

###### <font color='red'>コードブロックを追加し、以下のサンプルプログラムを実行しましょう</font>

```python
while True:
  u_input = input()
  if u_input == 'exit':
    break
  else:
    print(u_input)
```

　これは、breakと入力するまでループを継続するというプログラムです。このようにwhileの条件式をTrueにすることでbreakを呼ぶまで処理を続けます。

## メニュー画面を繰り返し表示させよう
　メイン処理をループさせ、メニューが毎回表示されるようにしましょう。

#### <font color='blue'>メニュー画面の表示 > ユーザーの入力 > 入力によって選ばれた処理」を繰り返すようにしましょう。また、"[2]:アプリを終了する"を選んだらプログラムが終了するようにしましょう</font>

##### [演習解答](/answer/12)

## STEP5完成コード

```python
#レビューの入力機能
#レビューの入力機能
def post_review():
  post = {}
  print("ジャンルを入力してください：")
  post['genre'] = input()
  print("タイトルを入力してください：")
  post['title'] = input()
  print("感想を入力してください：")
  post['review'] = input()
  line = "---------------------------"
  # レビューの描画
  print("ジャンル : {genre}\n{line}".format(genre=post['genre'], line=line))
  print("タイトル : {title}\n{line}".format(title=post['title'], line=line))
  print("感想 :\n{review}\n{line}".format(review=post['review'], line=line))

def read_reviews():
  print('レビューを読む')

def exception():
  print("入力された値は無効な値です")

while True:
  print("レビュー数：0")
  print("[0]レビューを書く")
  print("[1]レビューを読む")
  print("[2]アプリを終了する")

  user_input = int(input())

  if user_input == 0: # 「レビューを書く」
    post_review()
  elif user_input == 1: # 「レビューを読む」
    read_reviews()
  elif user_input == 2: # 「プログラムを終了する」
    break
  else:
    exception()
```

### 処理のながれ

```python
while True:
  # メニューの表示
  print("レビュー数：0")
  print("[0]レビューを書く")
  print("[1]レビューを読む")
  print("[2]アプリを終了する")

  user_input = int(input())

  if user_input == 0: # 「レビューを書く」
    post_review()
  elif user_input == 1: # 「レビューを読む」
    # レビューを読む
    read_review()
  elif user_input == 2: # 「プログラムを終了する」
    break
  else:
    exception()
```

プログラムの処理が始まりますがその前にwhile文で全体の処理を囲みます。while文は繰り返し処理と呼ばれる、同じ処理を何度も繰り返すときに使われる文法です。

while文は条件式がtrueのときに処理を繰り返します。
よって、条件式をtrueにすると無限ループ常に処理が繰り返し続けることになります。

### まとめ

ここでは繰り返し処理の使い方を学びました。
繰り返し処理は人間が苦手としている何千回という退屈な単調作業をコンピュータに行わせることができます。
また、この繰り返し処理は今後行う機械学習で必ずと言っていいほど使います。